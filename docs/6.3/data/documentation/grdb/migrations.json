{"seeAlsoSections":[{"title":"Migrations and The Database Schema","identifiers":["doc:\/\/GRDB\/documentation\/GRDB\/DatabaseSchema"],"generated":true}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can think of migrations as being ‚Äòversions‚Äô of the database. A database schema starts off in an empty state, and each migration adds or removes tables, columns, or entries."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"GRDB can update the database schema along this timeline, bringing it from whatever point it is in the history to the latest version. When a user upgrades your application, only non-applied migrations are run."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You setup migrations in a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseMigrator"},{"type":"text","text":" instance. For example:"}]},{"type":"codeListing","syntax":"swift","code":["var migrator = DatabaseMigrator()","","\/\/ 1st migration","migrator.registerMigration(\"Create authors\") { db in","    try db.create(table: \"author\") { t in","        t.autoIncrementedPrimaryKey(\"id\")","        t.column(\"creationDate\", .datetime)","        t.column(\"name\", .text)","    }","}","","\/\/ 2nd migration","migrator.registerMigration(\"Add books and author.birthYear\") { db in","    try db.create(table: \"book\") { t in","        t.autoIncrementedPrimaryKey(\"id\")","        t.column(\"authorId\", .integer)","            .notNull()","            .indexed()","            .references(\"author\", onDelete: .cascade)","        t.column(\"title\", .text).notNull()","    }","","    try db.alter(table: \"author\") { t","        t.add(column: \"birthYear\", .integer)","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To migrate a database, open a connection (see "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseConnections"},{"type":"text","text":"), and call the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseMigrator\/migrate(_:)"},{"type":"text","text":" method:"}]},{"type":"codeListing","syntax":"swift","code":["let dbQueue = try DatabaseQueue(path: \"\/path\/to\/database.sqlite\")","","\/\/ Migrate the database up to the latest version","try migrator.migrate(dbQueue)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can also migrate a database up to a specific version (useful for testing):"}]},{"type":"codeListing","syntax":"swift","code":["try migrator.migrate(dbQueue, upTo: \"v2\")","","\/\/ Migrations can only run forward:","try migrator.migrate(dbQueue, upTo: \"v2\")","try migrator.migrate(dbQueue, upTo: \"v1\")","\/\/ ^ fatal error: database is already migrated beyond migration \"v1\""]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When several versions of your app are deployed in the wild, you may want to perform extra checks:"}]},{"type":"codeListing","syntax":"swift","code":["try dbQueue.read { db in","    \/\/ Read-only apps or extensions may want to check if the database","    \/\/ lacks expected migrations:","    if try migrator.hasCompletedMigrations(db) == false {","        \/\/ database too old","    }","    ","    \/\/ Some apps may want to check if the database","    \/\/ contains unknown (future) migrations:","    if try migrator.hasBeenSuperseded(db) {","        \/\/ database too new","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Each migration runs in a separate transaction."}]},{"type":"text","text":" Should one throw an error, its transaction is rollbacked, subsequent migrations do not run, and the error is eventually thrown by "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseMigrator\/migrate(_:)"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Migrations run with deferred foreign key checks."}]},{"type":"text","text":" This means that eventual foreign key violations are only checked at the end of the migration (and they make the migration fail). See "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/Migrations#Foreign-Key-Checks"},{"type":"text","text":" below for more information."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"The memory of applied migrations is stored in the database itself"}]},{"type":"text","text":" (in a reserved table)."}]},{"anchor":"Defining-the-Database-Schema-from-a-Migration","level":2,"type":"heading","text":"Defining the Database Schema from a Migration"},{"type":"paragraph","inlineContent":[{"type":"text","text":"See "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseSchema"},{"type":"text","text":" for the methods that define the database schema."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you need to perform a schema change that is not directly supported by SQLite, or not available on your target operating system, you will need to recreate database tables."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For example:"}]},{"type":"codeListing","syntax":"swift","code":["migrator.registerMigration(\"Add NOT NULL check on author.name\") { db in","    try db.create(table: \"new_author\") { t in","        t.autoIncrementedPrimaryKey(\"id\")","        t.column(\"creationDate\", .datetime)","        t.column(\"name\", .text).notNull()","    }","    try db.execute(sql: \"INSERT INTO new_author SELECT * FROM author\")","    try db.drop(table: \"author\")","    try db.rename(table: \"new_author\", to: \"author\")","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The detailed sequence of operations for recreating a database table from a migration is:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When relevant, remember the format of all indexes, triggers, and views associated with table X. This information will be needed in steps 6 and 7 below. One way to do this is to run a query like the following: "},{"type":"codeVoice","code":"SELECT type, sql FROM sqlite_schema WHERE tbl_name='X'"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use "},{"type":"codeVoice","code":"CREATE TABLE"},{"type":"text","text":" to construct a new table ‚Äúnew_X‚Äù that is in the desired revised format of table X. Make sure that the name ‚Äúnew_X‚Äù does not collide with any existing table name, of course."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Transfer content from X into new_X using a statement like: "},{"type":"codeVoice","code":"INSERT INTO new_X SELECT ... FROM X"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Drop the old table X: "},{"type":"codeVoice","code":"DROP TABLE X"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Change the name of new_X to X using: "},{"type":"codeVoice","code":"ALTER TABLE new_X RENAME TO X"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When relevant, use "},{"type":"codeVoice","code":"CREATE INDEX"},{"type":"text","text":", "},{"type":"codeVoice","code":"CREATE TRIGGER"},{"type":"text","text":", and "},{"type":"codeVoice","code":"CREATE VIEW"},{"type":"text","text":" to reconstruct indexes, triggers, and views associated with table X. Perhaps use the old format of the triggers, indexes, and views saved from step 3 above as a guide, making changes as appropriate for the alteration."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If any views refer to table X in a way that is affected by the schema change, then drop those views using "},{"type":"codeVoice","code":"DROP VIEW"},{"type":"text","text":" and recreate them with whatever changes are necessary to accommodate the schema change using "},{"type":"codeVoice","code":"CREATE VIEW"},{"type":"text","text":"."}]}]}]},{"style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When recreating a table, be sure to follow the above procedure exactly, in the given order, or you might corrupt triggers, views, and foreign key constraints."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you want to recreate a table "},{"type":"emphasis","inlineContent":[{"type":"text","text":"outside of a migration"}]},{"type":"text","text":", check the full procedure detailed in the "},{"type":"reference","isActive":true,"identifier":"https:\/\/www.sqlite.org\/lang_altertable.html#making_other_kinds_of_table_schema_changes"},{"type":"text","text":" section of the SQLite documentation."}]}],"type":"aside","name":"Important"},{"anchor":"Good-Practices-for-Defining-Migrations","level":2,"type":"heading","text":"Good Practices for Defining Migrations"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"A good migration is a migration that is never modified once it has shipped."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"It is much easier to control the schema of all databases deployed on users‚Äô devices when migrations define a stable timeline of schema versions. For this reason, it is recommended that migrations define the database schema with "},{"type":"strong","inlineContent":[{"type":"text","text":"strings"}]},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["migrator.registerMigration(\"Create authors\") { db in","    \/\/ üëç RECOMMENDED","    try db.create(table: \"author\") { t in","        t.autoIncrementedPrimaryKey(\"id\")","        ...","    }","","    \/\/ üëé NOT RECOMMENDED","    try db.create(table: Author.databaseTableName) { t in","        t.autoIncrementedPrimaryKey(Author.Columns.id.name)","        ...","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In other words, migrations should talk to the database, only to the database, and use the database language. This makes sure the Swift code of any given migrations will never have to change in the future."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Migrations and the rest of the application code do not live at the same ‚Äúmoment‚Äù. Migrations describe the past states of the database, while the rest of the application code targets the latest one only. This difference is the reason why "},{"type":"strong","inlineContent":[{"type":"text","text":"migrations should not depend on application types."}]}]},{"anchor":"The-eraseDatabaseOnSchemaChange-Option","level":2,"type":"heading","text":"The eraseDatabaseOnSchemaChange Option"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A "},{"type":"codeVoice","code":"DatabaseMigrator"},{"type":"text","text":" can automatically wipe out the full database content, and recreate the whole database from scratch, if it detects that migrations have changed their definition."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Setting "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseMigrator\/eraseDatabaseOnSchemaChange"},{"type":"text","text":" is useful during application development, as you are still designing migrations, and the schema changes often:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A migration is removed, or renamed."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A schema change is detected: any difference in the "},{"type":"codeVoice","code":"sqlite_master"},{"type":"text","text":" table, which contains the SQL used to create database tables, indexes, triggers, and views."}]}]}]},{"style":"warning","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This option can destroy your precious users‚Äô data!"}]}],"type":"aside","name":"Warning"},{"type":"paragraph","inlineContent":[{"type":"text","text":"It is recommended that this option does not ship in the released application: hide it behind "},{"type":"codeVoice","code":"#if DEBUG"},{"type":"text","text":" as below."}]},{"type":"codeListing","syntax":"swift","code":["var migrator = DatabaseMigrator()","#if DEBUG","\/\/ Speed up development by nuking the database when migrations change","migrator.eraseDatabaseOnSchemaChange = true","#endif"]},{"anchor":"Foreign-Key-Checks","level":2,"type":"heading","text":"Foreign Key Checks"},{"type":"paragraph","inlineContent":[{"type":"text","text":"By default, each migration temporarily disables foreign keys, and performs a full check of all foreign keys in the database before it is committed on disk."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When the database becomes very big, those checks may have a noticeable impact on migration performances. You‚Äôll know this by profiling migrations, and looking for the time spent in the "},{"type":"codeVoice","code":"checkForeignKeys"},{"type":"text","text":" method."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can make those migrations faster, but this requires a little care."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Your first mitigation technique is immediate foreign key checks."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When you register a migration with "},{"type":"codeVoice","code":".immediate"},{"type":"text","text":" foreign key checks, the migration does not temporarily disable foreign keys, and does not need to perform a deferred full check of all foreign keys in ther database:"}]},{"type":"codeListing","syntax":"swift","code":["migrator.registerMigration(\"Faster migration\", foreignKeyChecks: .immediate) { db in ... }"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Such a migration is much faster, and it still guarantees database integrity. But it must only execute schema alterations directly supported by SQLite. Migrations that recreate tables as described in "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/Migrations#Defining-the-Database-Schema-from-a-Migration"},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"type":"text","text":"must not"}]},{"type":"text","text":" run with immediate foreign keys checks. You‚Äôll need to use the second mitigation technique:"}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Your second mitigation technique is to disable deferred foreign key checks."}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can ask the migrator to stop performing foreign key checks for all newly registered migrations:"}]},{"type":"codeListing","syntax":"swift","code":["migrator = migrator.disablingDeferredForeignKeyChecks()"]},{"style":"warning","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When deferred foreign key checks are disabled, your app becomes responsible for preventing foreign key violations from being committed to disk!"}]}],"type":"aside","name":"Warning"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to prevent foreign key violations from being committed to disk, you can:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Register migrations with immediate foreign key checks, as long as they do not recreate tables as described in "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/Migrations#Defining-the-Database-Schema-from-a-Migration"},{"type":"text","text":":"}]},{"type":"codeListing","syntax":"swift","code":["migrator = migrator.disablingDeferredForeignKeyChecks()","migrator.registerMigration(\"Checked migration\", foreignKeyChecks: .immediate) { db in ... }"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Perform foreign key checks on some tables only, before the migration is committed on disk:"}]},{"type":"codeListing","syntax":"swift","code":["migrator = migrator.disablingDeferredForeignKeyChecks()","migrator.registerMigration(\"Partially checked migration\") { db in","    ...","    ","    \/\/ Throws an error and stops migrations if there exists a","    \/\/ foreign key violation in the 'book' table.","    try db.checkForeignKeys(in: \"book\")","}"]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"As in the above example, check for foreign key violations with the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/Database\/checkForeignKeys()"},{"type":"text","text":" and "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/Database\/checkForeignKeys(in:)"},{"type":"text","text":" methods. They throw a nicely detailed "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseError"},{"type":"text","text":" that contains a lot of debugging information:"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ SQLite error 19: FOREIGN KEY constraint violation - from book(authorId) to author(id),","\/\/ in [id:1 authorId:2 name:\"Moby-Dick\"]","try db.checkForeignKeys(in: \"book\")"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Alternatively, you can deal with each individual violation by iterating a cursor of "},{"type":"reference","isActive":true,"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/ForeignKeyViolation"},{"type":"text","text":"."}]}]}],"variants":[{"paths":["\/documentation\/grdb\/migrations"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/GRDB\/documentation\/GRDB\/Migrations","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Migrations allow you to evolve your database schema over time."}],"kind":"article","metadata":{"modules":[{"name":"GRDB"}],"role":"collectionGroup","title":"Migrations"},"hierarchy":{"paths":[["doc:\/\/GRDB\/documentation\/GRDB"]]},"topicSections":[{"title":"DatabaseMigrator","identifiers":["doc:\/\/GRDB\/documentation\/GRDB\/DatabaseMigrator"]}],"references":{"doc://GRDB/documentation/GRDB/ForeignKeyViolation":{"role":"symbol","title":"ForeignKeyViolation","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ForeignKeyViolation"}],"abstract":[{"type":"text","text":"A foreign key violation."}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/ForeignKeyViolation","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ForeignKeyViolation"}],"url":"\/documentation\/grdb\/foreignkeyviolation"},"doc://GRDB/documentation/GRDB/DatabaseError":{"role":"symbol","title":"DatabaseError","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DatabaseError"}],"abstract":[{"type":"text","text":"A "},{"type":"codeVoice","code":"DatabaseError"},{"type":"text","text":" describes an SQLite error."}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DatabaseError"}],"url":"\/documentation\/grdb\/databaseerror"},"doc://GRDB/documentation/GRDB/DatabaseConnections":{"role":"collectionGroup","title":"Database Connections","abstract":[{"type":"text","text":"Open database connections to SQLite databases."}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseConnections","kind":"article","type":"topic","url":"\/documentation\/grdb\/databaseconnections"},"doc://GRDB/documentation/GRDB/Database/checkForeignKeys()":{"role":"symbol","title":"checkForeignKeys()","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"checkForeignKeys"},{"kind":"text","text":"() "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Throws an error if there exists a foreign key violation in the database."}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/Database\/checkForeignKeys()","kind":"symbol","type":"topic","url":"\/documentation\/grdb\/database\/checkforeignkeys()"},"doc://GRDB/documentation/GRDB/DatabaseSchema":{"role":"collectionGroup","title":"The Database Schema","abstract":[{"type":"text","text":"Learn how to define the database schema."}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseSchema","kind":"article","type":"topic","url":"\/documentation\/grdb\/databaseschema"},"https://www.sqlite.org/lang_altertable.html#making_other_kinds_of_table_schema_changes":{"title":"Making Other Kinds Of Table Schema Changes","titleInlineContent":[{"type":"text","text":"Making Other Kinds Of Table Schema Changes"}],"type":"link","identifier":"https:\/\/www.sqlite.org\/lang_altertable.html#making_other_kinds_of_table_schema_changes","url":"https:\/\/www.sqlite.org\/lang_altertable.html#making_other_kinds_of_table_schema_changes"},"doc://GRDB/documentation/GRDB":{"role":"collection","title":"GRDB","abstract":[{"type":"text","text":"A toolkit for SQLite databases, with a focus on application development"}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB","kind":"symbol","type":"topic","url":"\/documentation\/grdb"},"doc://GRDB/documentation/GRDB/Migrations#Defining-the-Database-Schema-from-a-Migration":{"abstract":[],"title":"Defining the Database Schema from a Migration","kind":"section","type":"topic","identifier":"doc:\/\/GRDB\/documentation\/GRDB\/Migrations#Defining-the-Database-Schema-from-a-Migration","url":"\/documentation\/grdb\/migrations#Defining-the-Database-Schema-from-a-Migration"},"doc://GRDB/documentation/GRDB/DatabaseMigrator/migrate(_:)":{"role":"symbol","title":"migrate(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"migrate"},{"kind":"text","text":"(some "},{"kind":"typeIdentifier","text":"DatabaseWriter","preciseIdentifier":"s:4GRDB14DatabaseWriterP"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Runs all unapplied migrations, in the same order as they"},{"type":"text","text":" "},{"type":"text","text":"were registered."}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseMigrator\/migrate(_:)","kind":"symbol","type":"topic","url":"\/documentation\/grdb\/databasemigrator\/migrate(_:)"},"doc://GRDB/documentation/GRDB/DatabaseMigrator/eraseDatabaseOnSchemaChange":{"role":"symbol","title":"eraseDatabaseOnSchemaChange","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"eraseDatabaseOnSchemaChange"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"A boolean value indicating whether the migrator recreates the whole"},{"type":"text","text":" "},{"type":"text","text":"database from scratch if it detects a change in the definition"},{"type":"text","text":" "},{"type":"text","text":"of migrations."}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseMigrator\/eraseDatabaseOnSchemaChange","kind":"symbol","type":"topic","url":"\/documentation\/grdb\/databasemigrator\/erasedatabaseonschemachange"},"doc://GRDB/documentation/GRDB/Database/checkForeignKeys(in:)":{"role":"symbol","title":"checkForeignKeys(in:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"checkForeignKeys"},{"kind":"text","text":"("},{"kind":"externalParam","text":"in"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Throws an error if there exists a foreign key violation in the table."}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/Database\/checkForeignKeys(in:)","kind":"symbol","type":"topic","url":"\/documentation\/grdb\/database\/checkforeignkeys(in:)"},"doc://GRDB/documentation/GRDB/DatabaseMigrator":{"role":"symbol","title":"DatabaseMigrator","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"DatabaseMigrator"}],"abstract":[{"type":"text","text":"A "},{"type":"codeVoice","code":"DatabaseMigrator"},{"type":"text","text":" registers and applies database migrations."}],"identifier":"doc:\/\/GRDB\/documentation\/GRDB\/DatabaseMigrator","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"DatabaseMigrator"}],"url":"\/documentation\/grdb\/databasemigrator"},"doc://GRDB/documentation/GRDB/Migrations#Foreign-Key-Checks":{"abstract":[],"title":"Foreign Key Checks","kind":"section","type":"topic","identifier":"doc:\/\/GRDB\/documentation\/GRDB\/Migrations#Foreign-Key-Checks","url":"\/documentation\/grdb\/migrations#Foreign-Key-Checks"}}}